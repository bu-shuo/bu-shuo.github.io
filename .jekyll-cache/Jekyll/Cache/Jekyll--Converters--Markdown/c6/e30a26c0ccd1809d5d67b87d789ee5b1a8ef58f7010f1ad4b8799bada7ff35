I"	<p><br /></p>

<h1 id="0x00-简介">0x00 简介</h1>
<hr />

<p>一个攻击者主要的目标就是完成特定任务并且不被发现，这个过程包括了在目标环境中建立一个立足点并进行横向移动，在真实攻击过程中，攻击者是在对目标安全控制系统所知甚少的情况下进行的。因此，攻击者必须注意调整他们的战略来保证不被安全控制系统所发现。随着新技术的不断发展，安全控制技术也逐渐成熟，这促使各种类型的攻击者调整和改进他们的策略，以此来最大限度提高攻击成功的可能性。</p>

<p>从攻击者的角度来看，最具挑战的新技术就是端点检测响应系统（Endpoint Detection and Response，EDR），它总是被称为未来的杀毒软件（Antivirus，AV）。传统的 AV 主要通过结合签名和启发式分析技术来加强对恶意代码的检测和防御，然而，EDR 主要有两个任务： <strong>对恶意行为和其他签名的检测</strong> 和 <strong>便捷的分析和应急响应</strong> ，因为这些原因，EDR 已经成为全面防御攻击者的要求。</p>

<p>EDR 被设计用来检测发生在端点上的可疑行为，这些行为可能包括一个攻击范围，例如进程执行或进程注入，以及在内存中加载映像。一旦这些行为被识别，EDR 就该发挥第二个作用——作为防御者和应急响应的工具对检测到的行为进行响应。响应的过程包括将受害主机从网络中隔离，快速收集端点日志，重塑事件发生的时间线，收集和记录威胁指标，甚至会终止可以进程。</p>

<p>攻击者则是通过开发新的更复杂的技术去躲避在磁盘和内存上的检测来作为回应。这些技术不局限于传统的初始攻击向量，它们经常利用后渗透技术去躲避检测，实施这些技术的关键是能够 hook 到主机上的所有进程，因为 EDR 技术会在几毫秒内作出许多决定。</p>

<p>如果没有之前的优秀工作，这个项目是不可能实现的。许多人公开了 EDR 和 内存 Hook 方面的创新研究，这些工作的重点是绕过特定的产品。本文的目的则是更深入地探讨该主题，不是专注于仅用于特定产品的技术，而是识别多有 EDR 产品的系统性问题，以及攻击者如何无需事先了解客户的安全栈就可以利用它们绕过 EDR 产品，这需要涉及到先前讨论过的概念。</p>

:ET